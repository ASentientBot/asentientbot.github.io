<!DOCTYPE html>
<!-- generated by Parser.m -->
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="initial-scale=0.8">
<link rel="stylesheet" href="/common/style.css">
<title>ASentientBot</title>
</head>
<body>
<div id="container">
<div id="headerOuter" class="divOuter">
<div id="headerInner" class="divInner">
<h1><a href="/">ASentientBot</a></h1>
<a href="mailto:asentientbot@gmail.com">asentientbot@gmail.com</a> • ASentientBot#0323 • <a target="_blank" href="https://twitter.com/ASentientBot">@ASentientBot</a>
</div>
</div>
<div id="bodyOuter" class="divOuter">
<div id="bodyInner" class="divInner">
<h1>running Mojave on a MacBook7,1</h1>
I made a few contributions to <a target="_blank" href="http://dosdude1.com">dosdude1</a>'s <a target="_blank" href="http://dosdude1.com/mojave">macOS Mojave Patcher</a>.
<br>
<br><h2>posts on MacRumors</h2>
Links to some of my relevant posts on the <a target="_blank" href="https://forums.macrumors.com/threads/macos-10-14-mojave-on-unsupported-macs-thread.2121473/">MacRumors thread</a>.
<br><ul>
<li>Penryn CPU panic <a target="_blank" href="https://forums.macrumors.com/threads/macos-10-14-mojave-on-unsupported-macs-thread.2121473/post-26222082">fix</a> (<a target="_blank" href="https://forums.macrumors.com/threads/macos-10-14-mojave-on-unsupported-macs-thread.2121473/post-26222642">refinement</a> by <a target="_blank" href="https://forums.macrumors.com/members/jackluke.1133911/">@jackluke</a>, fun <a target="_blank" href="https://forums.macrumors.com/threads/macos-10-14-mojave-on-unsupported-macs-thread.2121473/post-26877298">analysis</a> of another "solution")</li>
<li><a target="_blank" href="https://forums.macrumors.com/threads/macos-10-14-mojave-on-unsupported-macs-thread.2121473/post-26239785">Patch</a> to fix nVidia Tesla acceleration (older <a target="_blank" href="https://forums.macrumors.com/threads/macos-10-14-mojave-on-unsupported-macs-thread.2121473/post-26230707">dumb hack</a>)</li>
<li><a target="_blank" href="https://forums.macrumors.com/threads/macos-10-14-mojave-on-unsupported-macs-thread.2121473/post-26252470">Notes</a> on manually downloading macOS installers</li>
<li>Arduino communication <a target="_blank" href="https://forums.macrumors.com/threads/macos-10-14-mojave-on-unsupported-macs-thread.2121473/post-26689955">fix</a> for certain USB hardware</li>
<li>Acceleration <a target="_blank" href="https://forums.macrumors.com/threads/macos-10-14-mojave-on-unsupported-macs-thread.2121473/post-27284257">fix</a> for 10.14.5</li>
<li><a target="_blank" href="https://forums.macrumors.com/threads/macos-10-14-mojave-on-unsupported-macs-thread.2121473/post-27372829">Improvement</a> to <a target="_blank" href="https://forums.macrumors.com/members/minh_ton.1176557/">@Minh_Ton</a>'s News <a target="_blank" href="https://forums.macrumors.com/threads/macos-10-14-mojave-on-unsupported-macs-thread.2121473/post-27372301">fix</a></li>
</ul>
<br><h2>manual patching</h2>
While the <a target="_blank" href="http://dosdude1.com/mojave">patcher</a> is excellent, open-source documentation can be valuable. The following steps, derived from discussion on the <a target="_blank" href="https://forums.macrumors.com/threads/macos-10-14-mojave-on-unsupported-macs-thread.2121473/">MacRumors thread</a>, are for 10.14.5 on a mid-2010 MacBook. Many parts apply to other systems.
<br>
<br><h3>installation</h3>
Retrieve and open the <code>Packages</code> folder from a Mojave <code>InstallESD.dmg</code>.
<br><code>pkgutil --expand OSInstall.mpkg Expanded</code>
<br>
<br>Open the <code>Distribution</code> file in a text editor.
<br>Insert <code>return true;</code> at the beginning of the <code>installationCheck()</code> function.
<br>Remove <code>installsOS=true</code> from the top of the file.
<br>
<br><code>pkgutil --flatten Expanded Patched.mpkg</code>
<br>Install the patched package to an empty HFS+ partition.
<br>
<br><h3>make bootable and set kernel flags</h3>
Open the freshly installed volume.
<br>Copy <code>/usr/standalone/i386/boot.efi</code> to <code>/System/Library/CoreServices/</code>.
<br>Open <code>/Library/Preferences/SystemConfiguration/com.apple.Boot.plist</code> in a text editor.
<br>Change <code>Kernel Flags</code> to <code>-v -no_compat_check keepsyms=1</code>.
<br>
<br><h3>prevent kernel panic on Penryn CPUs</h3>
Delete <code>/System/Library/UserEventPlugins/com.apple.telemetry.plugin</code>.
<br>
<br><h3>fix sound</h3>
Replace <code>/System/Library/Extensions/AppleHDA.kext</code> from macOS 10.13.6.
<br>
<br><h3>install GPU detection kexts</h3>
Copy from macOS 10.13.6:
<br><code>/System/Library/Extensions/NVDAResmanTesla.kext
/System/Library/Extensions/NVDANV50HalTesla.kext</code>
<br>
<br><h3>fix VSLGestalt missing symbol</h3>
Install <a target="_blank" href="https://forums.macrumors.com/members/parrotgeek1.1033441/">@parrotgeek1</a>'s <a target="_blank" href="https://forums.macrumors.com/attachments/10-14patch-zip.790578/">NDRVShim.kext</a>.
<br>
<br><i>Or</i>, replace from 10.13.6:
<br><code>/System/Library/Extensions/IONDRVSupport.kext
/System/Library/Extensions/IOGraphicsFamily.kext</code>
<br>(prevents <code>AppleGraphicsDevicePolicy</code> from loading)
<br>
<br><i>Or</i>, patch <code>NVDAResmanTesla.kext</code>'s main binary:
<br><code>0x1ea59a - 0x1ea5b3: nop</code>
<br>Then, open the patched binary in a text editor and find+replace <code>VSLGestalt</code> to <code>IOLockLock</code> or any other known symbol of the same length.
<br>
<br><h3>enable framebuffer</h3>
Copy from 10.13.6:
<br><code>/System/Library/Extensions/GeForceTesla.kext
/System/Library/Extensions/GeForceGA.bundle</code>
<br>
<br><h3>enable acceleration</h3>
Copy from 10.13.6:
<br><code>/System/Library/Extensions/GeForceTeslaGLDriver.bundle
/System/Library/Extensions/GeForceTeslaVADriver.bundle</code>
<br>
<br>Patch <code>GeForceTesla.kext</code>'s main binary:
<br><code>nvVirtualAddressSpaceTesla::free() + 183: nop</code>
<br>
<br><h3>fix Arduino uploads</h3>
Replace from 10.13.6:
<br><code>/System/Library/Extensions/AppleUSBACM.kext</code>
<br>
<br><h3>prevent WindowServer crash since 10.14.4</h3>
Replace from 10.14.3:
<br><code>/System/Library/PrivateFrameworks/GPUSupport.framework
/System/Library/Frameworks/OpenGL.framework</code>
<br>
<br><h3>prevent WindowServer crash since 10.14.5</h3>
Replace from 10.14.4:
<br><code>/System/Library/Frameworks/CoreDisplay.framework</code>
<br>
<br><h3>rebuild the prelinkedkernel</h3>
<code>sudo chmod -R 755 /Volumes/Mojave/System/Library/Extensions
sudo chown -R root:wheel /Volumes/Mojave/System/Library/Extensions</code>
<br>Disable SIP and reboot into the patched system.
<br><code>sudo kextcache -i /</code>
<br>
<br><h3>enable subpixel antialiasing</h3>
<code>defaults write -g CGFontRenderingFontSmoothingDisabled -bool false</code>
<br>
<br><h3>fix News app crash</h3>
<code>sudo printf "\n/System/Library/Frameworks/OpenCL.framework" &gt;&gt; /System/iOSSupport/dyld/macOS-whitelist.txt</code>
</div>
</div>
</div>
</body>
</html>