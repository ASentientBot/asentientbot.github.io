<!DOCTYPE html>
<!-- generated by Parser.m -->
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="initial-scale=0.8">
<link rel="stylesheet" href="/common/style.css">
<title>ASentientBot</title>
</head>
<body>
<div id="container">
<div id="headerOuter" class="divOuter">
<div id="headerInner" class="divInner">
<h1><a href="/">ASentientBot</a></h1>
<a href="mailto:asentientbot@gmail.com">asentientbot@gmail.com</a> • ASentientBot#0323 • <a target="_blank" href="https://twitter.com/ASentientBot">@ASentientBot</a>
</div>
</div>
<div id="bodyOuter" class="divOuter">
<div id="bodyInner" class="divInner">
<h1>fixing dumped IPAs</h1>
<a target="_blank" href="https://github.com/KJCracks/Clutch">Clutch</a> and <a target="_blank" href="https://github.com/AloneMonkey/frida-ios-dump">frida-ios-dump</a> are essential for archiving iOS apps, but just <a target="_blank" href="https://cydia.akemi.ai/?page/com.linusyang.appinst">appinst</a>-ing the resulting IPAs doesn't always work. A few crash instantly; many seem to work but won't save logins. This is caused by both utilities' failure to preserve entitlements, including the ability to access the keychain. The solution is hardly worth a webpage, but it stumped me for a while, and no tutorials seem to mention it.
<br>
<br><h2>retrieve encrypted bundle</h2>
After dumping the IPA as usual, unzip it and check the app bundle's name. Then, on iOS:
<br><code>bundlePath="$(find /private -name &lt;name&gt;.app)"
tar cf encrypted.tar "$bundlePath"</code>
<br>
<br>Transfer the resulting archive to a Mac.
<br>
<br><h2>dump entitlements</h2>
Unzip the encrypted app.
<br><code>codesign --dump --entitlements /tmp/entitlements.xml &lt;name&gt;.app</code>
<br>
<br><h2>re-sign</h2>
Unzip the dumped IPA.
<br><code>codesign -f -s - --entitlements /tmp/entitlements.xml &lt;name&gt;.app</code>
<br>
<br>You can now re-zip the <code>Payload</code> folder, rename to IPA, and install on a jailbroken device.
</div>
</div>
</div>
</body>
</html>